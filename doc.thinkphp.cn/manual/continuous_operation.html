<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>连贯操作 - ThinkPHP完全开发手册 - 3.1</title><meta name="keywords" content="ThinkPHP,文档中心,在线手册,phpthink,类库参考,视频教程,book,3.0,api,开发框架,web框架,PHP开发框架,ThinkPHP手册"/><meta name="description" content="中文最佳实践框架  JUST THINK IT ThinkPHP 大道至简 开发由我|php快速开发|just think it|php开源框架|php网站开发|上海顶想|ORM|Framework|PHP企业开发"/><link href="../Public/favicon.ico" rel="shortcut icon"><link rel="stylesheet" type="text/css" href="../Public/css/layout.css" /><link rel="stylesheet" type="text/css" href="../Public/css/book.css" /><link rel="stylesheet" type="text/css" href="../Public/prettify/prettify.css" /><link rel="stylesheet" type="text/css" href="../Public/ThinkBox/ThinkBox.css" /><script type="text/javascript" src="../Public/js/jquery-1.7.1.min.js"></script><script type="text/javascript" src="../Public/js/common.js"></script><script type="text/javascript" src="../Public/prettify/prettify.js"></script><script type="text/javascript" src="../Public/ThinkBox/jquery.ThinkBox.js"></script><link rel="stylesheet" type="text/css" href="../Plugin/remark/remark.css" /><script type="text/javascript" src="../Plugin/remark/remark.js"></script></head><body><div id="header"><div id="innerHeader"><div class="book-top cf"><div class="book-logo fl"><a href="../manual.html" book="1">ThinkPHP完全开发手册</a><sup>3.1</sup></div><div class="right fr"><div class="user-current"></div></div></div></div></div><div id="sortList"><div class="inner"><div class="menu-title">目录Directory</div></div></div><div id="selector"><div class="inner"><div class="book-menu"><div class="list"><ul><li class=" child"><a class="title " href="preface.html" title="序言">序言</a></li><li class=" child"><a class="title " href="start.html" title="入门">第1章&nbsp;入门</a><ul><li><a class="" href="introduction.html">1.1&nbsp;简介</a></li><li><a class="" href="basic_concept.html">1.2&nbsp;基础概念</a></li><li><a class="" href="get_thinkphp.html">1.3&nbsp;获取ThinkPHP</a></li><li><a class="" href="environment.html">1.4&nbsp;环境要求</a></li><li><a class="" href="licence.html">1.5&nbsp;许可协议</a></li><li><a class="" href="directory.html">1.6&nbsp;目录结构</a></li><li><a class="" href="naming_conventions.html">1.7&nbsp;命名规范</a></li><li><a class="" href="mvc.html">1.8&nbsp;MVC分层</a></li><li><a class="" href="cbd.html">1.9&nbsp;CBD架构</a></li><li><a class="" href="features.html">1.10&nbsp;特性概述</a></li><li><a class="" href="system_process.html">1.11&nbsp;系统流程</a></li><li><a class="" href="development_process.html">1.12&nbsp;开发流程</a></li></ul></li><li class=" child"><a class="title " href="entry.html" title="入口">第2章&nbsp;入口</a><ul><li><a class="" href="entrance.html">2.1&nbsp;入口文件</a></li><li><a class="" href="app_directory.html">2.2&nbsp;项目目录</a></li><li><a class="" href="deploy_directory.html">2.3&nbsp;部署目录</a></li><li><a class="" href="app_compile.html">2.4&nbsp;项目编译</a></li><li><a class="" href="debug_mode.html">2.5&nbsp;调试模式</a></li></ul></li><li class=" child"><a class="title " href="config.html" title="配置">第3章&nbsp;配置</a><ul><li><a class="" href="config_type.html">3.1&nbsp;配置格式</a></li><li><a class="" href="convention_config.html">3.2&nbsp;惯例配置</a></li><li><a class="" href="app_config.html">3.3&nbsp;项目配置</a></li><li><a class="" href="debug_config.html">3.4&nbsp;调试配置</a></li><li><a class="" href="group_config.html">3.5&nbsp;分组配置</a></li><li><a class="" href="read_config.html">3.6&nbsp;读取配置</a></li><li><a class="" href="dynamic_config.html">3.7&nbsp;动态配置</a></li><li><a class="" href="extend_config.html">3.8&nbsp;扩展配置</a></li></ul></li><li class=" child"><a class="title " href="function_class.html" title="函数和类库">第4章&nbsp;函数和类库</a><ul><li><a class="" href="functions.html">4.1&nbsp;函数库</a></li><li><a class="" href="class.html">4.2&nbsp;类库</a></li></ul></li><li class=" child"><a class="title " href="controller.html" title="控制器">第5章&nbsp;控制器</a><ul><li><a class="" href="url_mode.html">5.1&nbsp;URL模式</a></li><li><a class="" href="module_action.html">5.2&nbsp;模块和操作</a></li><li><a class="" href="define_controller.html">5.3&nbsp;定义控制器</a></li><li><a class="" href="empty_action.html">5.4&nbsp;空操作</a></li><li><a class="" href="empty_module.html">5.5&nbsp;空模块</a></li><li><a class="" href="module_group.html">5.6&nbsp;模块分组</a></li><li><a class="" href="url_suffix.html">5.7&nbsp;URL伪静态</a></li><li><a class="" href="url_route.html">5.8&nbsp;URL路由</a></li><li><a class="" href="url_rewrite.html">5.9&nbsp;URL重写</a></li><li><a class="" href="url_build.html">5.10&nbsp;URL生成</a></li><li><a class="" href="url_case.html">5.11&nbsp;URL大小写</a></li><li><a class="" href="before_after.html">5.12&nbsp;前置和后置操作</a></li><li><a class="" href="cross_module.html">5.13&nbsp;跨模块调用</a></li><li><a class="" href="page_dispatch.html">5.14&nbsp;页面跳转</a></li><li><a class="" href="redirect.html">5.15&nbsp;重定向</a></li><li><a class="" href="get_system_var.html">5.16&nbsp;获取系统变量</a></li><li><a class="" href="request_method.html">5.17&nbsp;判断请求类型</a></li><li><a class="" href="get_url_params.html">5.18&nbsp;获取URL参数</a></li><li><a class="" href="ajax_return.html">5.19&nbsp;AJAX返回</a></li><li><a class="" href="action_param_bind.html">5.20&nbsp;Action参数绑定</a></li><li><a class="" href="multi_action_layer.html">5.21&nbsp;多层控制器支持</a></li></ul></li><li class="show child"><a class="title " href="model.html" title="模型">第6章&nbsp;模型</a><ul><li><a class="" href="model_define.html">6.1&nbsp;模型定义</a></li><li><a class="" href="model_instance.html">6.2&nbsp;模型实例化</a></li><li><a class="" href="field_define.html">6.3&nbsp;字段定义</a></li><li><a class="" href="primary_key.html">6.4&nbsp;数据主键</a></li><li><a class="" href="get_fields.html">6.5&nbsp;属性访问</a></li><li><a class="" href="cross_database.html">6.6&nbsp;跨库操作</a></li><li><a class="" href="connect_database.html">6.7&nbsp;连接数据库</a></li><li><a class="" href="switch_database.html">6.8&nbsp;切换数据库</a></li><li><a class="" href="distributed_database.html">6.9&nbsp;分布式数据库</a></li><li><a class="" href="create.html">6.10&nbsp;创建数据</a></li><li><a class="" href="field_map.html">6.11&nbsp;字段映射</a></li><li><a class="selected" href="continuous_operation.html">6.12&nbsp;连贯操作</a></li><li><a class="" href="curd.html">6.13&nbsp;CURD操作</a></li><li><a class="" href="active_record.html">6.14&nbsp;ActiveRecord</a></li><li><a class="" href="auto_validate.html">6.15&nbsp;自动验证</a></li><li><a class="" href="name_range.html">6.16&nbsp;命名范围</a></li><li><a class="" href="auto_operate.html">6.17&nbsp;自动完成</a></li><li><a class="" href="query.html">6.18&nbsp;查询语言</a></li><li><a class="" href="query_lock.html">6.19&nbsp;查询锁定</a></li><li><a class="" href="field_except.html">6.20&nbsp;字段排除</a></li><li><a class="" href="trans_support.html">6.21&nbsp;事务支持</a></li><li><a class="" href="adv_model.html">6.22&nbsp;高级模型</a></li><li><a class="" href="view_model.html">6.23&nbsp;视图模型</a></li><li><a class="" href="relation_model.html">6.24&nbsp;关联模型</a></li><li><a class="" href="mongo_model.html">6.25&nbsp;Mongo模型</a></li><li><a class="" href="dynamic_model.html">6.26&nbsp;动态模型</a></li><li><a class="" href="virtual_model.html">6.27&nbsp;虚拟模型</a></li><li><a class="" href="multi_model_layer.html">6.28&nbsp;多层模型支持</a></li></ul></li><li class=" child"><a class="title " href="view.html" title="视图">第7章&nbsp;视图</a><ul><li><a class="" href="template_define.html">7.1&nbsp;模板定义</a></li><li><a class="" href="template_assign.html">7.2&nbsp;模板赋值</a></li><li><a class="" href="template_output.html">7.3&nbsp;模板输出</a></li><li><a class="" href="template_replace.html">7.4&nbsp;模板替换</a></li><li><a class="" href="fetch_content.html">7.5&nbsp;获取内容</a></li><li><a class="" href="template_engine.html">7.6&nbsp;模板引擎</a></li><li><a class="" href="layout.html">7.7&nbsp;布局模板</a></li></ul></li><li class=" child"><a class="title " href="template.html" title="模板引擎">第8章&nbsp;模板引擎</a><ul><li><a class="" href="var_output.html">8.1&nbsp;变量输出</a></li><li><a class="" href="system_var.html">8.2&nbsp;系统变量</a></li><li><a class="" href="use_function.html">8.3&nbsp;使用函数</a></li><li><a class="" href="default_val.html">8.4&nbsp;默认值输出</a></li><li><a class="" href="use_operate.html">8.5&nbsp;使用运算符</a></li><li><a class="" href="buildin_tag.html">8.6&nbsp;内置标签</a></li><li><a class="" href="include_file.html">8.7&nbsp;包含文件</a></li><li><a class="" href="load_file.html">8.8&nbsp;导入文件</a></li><li><a class="" href="volist.html">8.9&nbsp;Volist标签</a></li><li><a class="" href="foreach.html">8.10&nbsp;Foreach标签</a></li><li><a class="" href="for.html">8.11&nbsp;For标签</a></li><li><a class="" href="switch.html">8.12&nbsp;Switch标签</a></li><li><a class="" href="compare.html">8.13&nbsp;比较标签</a></li><li><a class="" href="three_operators.html">8.14&nbsp;三元运算</a></li><li><a class="" href="range.html">8.15&nbsp;范围判断标签</a></li><li><a class="" href="present.html">8.16&nbsp;Present标签</a></li><li><a class="" href="empty.html">8.17&nbsp;Empty标签</a></li><li><a class="" href="defined.html">8.18&nbsp;Defined标签</a></li><li><a class="" href="define.html">8.19&nbsp;Define标签</a></li><li><a class="" href="assign.html">8.20&nbsp;Assign标签</a></li><li><a class="" href="if.html">8.21&nbsp;IF标签</a></li><li><a class="" href="tag_nest.html">8.22&nbsp;标签嵌套</a></li><li><a class="" href="use_php.html">8.23&nbsp;使用PHP代码</a></li><li><a class="" href="layout_template.html">8.24&nbsp;模板布局</a></li><li><a class="" href="extend_template.html">8.25&nbsp;模板继承</a></li><li><a class="" href="literal.html">8.26&nbsp;原样输出</a></li><li><a class="" href="comment.html">8.27&nbsp;模板注释</a></li><li><a class="" href="taglib.html">8.28&nbsp;引入标签库</a></li><li><a class="" href="modify_edlim.html">8.29&nbsp;修改定界符</a></li><li><a class="" href="js_confusion.html">8.30&nbsp;避免JS混淆</a></li></ul></li><li class=" child"><a class="title " href="log.html" title="日志">第9章&nbsp;日志</a><ul><li><a class="" href="log_level.html">9.1&nbsp;日志级别</a></li><li><a class="" href="log_type.html">9.2&nbsp;记录方式</a></li><li><a class="" href="log_record.html">9.3&nbsp;手动记录</a></li></ul></li><li class=" child"><a class="title " href="error.html" title="错误">第10章&nbsp;错误</a><ul><li><a class="" href="exception.html">10.1&nbsp;异常处理</a></li><li><a class="" href="exception_tmpl.html">10.2&nbsp;异常模板</a></li><li><a class="" href="exception_info.html">10.3&nbsp;异常显示</a></li></ul></li><li class=" child"><a class="title " href="debug.html" title="调试">第11章&nbsp;调试</a><ul><li><a class="" href="app_status.html">11.1&nbsp;运行状态</a></li><li><a class="" href="page_trace.html">11.2&nbsp;页面Trace</a></li><li><a class="" href="debug_mothod.html">11.3&nbsp;调试方法</a></li></ul></li><li class=" child"><a class="title " href="cache.html" title="缓存">第12章&nbsp;缓存</a><ul><li><a class="" href="cache_type.html">12.1&nbsp;缓存方式</a></li><li><a class="" href="dynamic_cache.html">12.2&nbsp;动态缓存</a></li><li><a class="" href="cache_queue.html">12.3&nbsp;缓存队列</a></li><li><a class="" href="express_cache.html">12.4&nbsp;快捷缓存</a></li><li><a class="" href="fast_save.html">12.5&nbsp;快速缓存</a></li><li><a class="" href="query_cache.html">12.6&nbsp;查询缓存</a></li><li><a class="" href="sql_cache.html">12.7&nbsp;SQL解析缓存</a></li><li><a class="" href="html_cache.html">12.8&nbsp;静态缓存</a></li></ul></li><li class=" child"><a class="title " href="extend.html" title="扩展">第13章&nbsp;扩展</a><ul><li><a class="" href="behavior_extend.html">13.1&nbsp;行为扩展</a></li><li><a class="" href="library_extend.html">13.2&nbsp;类库扩展</a></li><li><a class="" href="action_extend.html">13.3&nbsp;控制器扩展</a></li><li><a class="" href="model_extend.html">13.4&nbsp;模型扩展</a></li><li><a class="" href="driver_extend.html">13.5&nbsp;驱动扩展</a></li><li><a class="" href="widget_extend.html">13.6&nbsp;Widget扩展</a></li><li><a class="" href="mode_extend.html">13.7&nbsp;模式扩展</a></li><li><a class="" href="engine_extend.html">13.8&nbsp;引擎扩展</a></li></ul></li><li class=" child"><a class="title " href="safety.html" title="安全">第14章&nbsp;安全</a><ul><li><a class="" href="form_token.html">14.1&nbsp;表单令牌</a></li><li><a class="" href="field_type_validate.html">14.2&nbsp;字段类型验证</a></li><li><a class="" href="sql_injection.html">14.3&nbsp;防止SQL注入</a></li><li><a class="" href="input_filter.html">14.4&nbsp;输入过滤</a></li><li><a class="" href="upload_safe.html">14.5&nbsp;上传安全</a></li><li><a class="" href="prevent_xss.html">14.6&nbsp;防止XSS攻击</a></li><li><a class="" href="other_suggestion.html">14.7&nbsp;其他安全建议</a></li><li><a class="" href="dir_secure.html">14.8&nbsp;目录安全文件</a></li><li><a class="" href="protected_template.html">14.9&nbsp;保护模板文件</a></li></ul></li><li class=" child"><a class="title " href="performance.html" title="性能">第15章&nbsp;性能</a><ul><li><a class="" href="close_debug.html">15.1&nbsp;关闭调试模式</a></li><li><a class="" href="cache_on.html">15.2&nbsp;开启缓存</a></li><li><a class="" href="merge_fields.html">15.3&nbsp;合并字段缓存</a></li><li><a class="" href="sql_optimization.html">15.4&nbsp;优化SQL</a></li><li><a class="" href="replace_entrance.html">15.5&nbsp;替换入口</a></li><li><a class="" href="front_optimization.html">15.6&nbsp;前端优化</a></li></ul></li><li class=" child"><a class="title " href="deploy.html" title="部署">第16章&nbsp;部署</a><ul><li><a class="" href="path_info_support.html">16.1&nbsp;PATH_INFO支持</a></li><li><a class="" href="hidden_index.html">16.2&nbsp;隐藏index.php</a></li><li><a class="" href="sub_domain_deploy.html">16.3&nbsp;二级域名部署</a></li><li><a class="" href="error_page.html">16.4&nbsp;定制错误页面</a></li><li><a class="" href="set_zone.html">16.5&nbsp;设置时区</a></li></ul></li><li class=" child"><a class="title " href="sae.html" title="SAE支持">第17章&nbsp;SAE支持</a><ul><li><a class="" href="sae_intro.html">17.1&nbsp;SAE介绍</a></li><li><a class="" href="get_sae.html">17.2&nbsp;获取SAE</a></li><li><a class="" href="sae_develop.html">17.3&nbsp;SAE开发</a></li></ul></li><li class=" child"><a class="title " href="rest.html" title="REST支持">第18章&nbsp;REST支持</a><ul><li><a class="" href="rest_intro.html">18.1&nbsp;REST介绍</a></li><li><a class="" href="rest_mode.html">18.2&nbsp;REST模式</a></li><li><a class="" href="rest_config.html">18.3&nbsp;REST配置</a></li><li><a class="" href="rest_route.html">18.4&nbsp;REST路由</a></li><li><a class="" href="rest_method.html">18.5&nbsp;REST方法</a></li></ul></li><li class=" child"><a class="title " href="sundry.html" title="杂项">第19章&nbsp;杂项</a><ul><li><a class="" href="session.html">19.1&nbsp;Session支持</a></li><li><a class="" href="cookie.html">19.2&nbsp;Cookie支持</a></li><li><a class="" href="date.html">19.3&nbsp;日期和时间</a></li><li><a class="" href="wml.html">19.4&nbsp;WML开发</a></li><li><a class="" href="multi_lang.html">19.5&nbsp;多语言</a></li><li><a class="" href="data_page.html">19.6&nbsp;数据分页</a></li><li><a class="" href="upload.html">19.7&nbsp;文件上传</a></li><li><a class="" href="verify.html">19.8&nbsp;验证码</a></li><li><a class="" href="watermark.html">19.9&nbsp;图片添加水印</a></li><li><a class="" href="ip_location.html">19.10&nbsp;IP获取和定位</a></li></ul></li><li class=" child"><a class="title " href="appendix.html" title="附录">第20章&nbsp;附录</a><ul><li><a class="" href="constant_reference.html">20.1&nbsp;常量参考</a></li><li><a class="" href="config_reference.html">20.2&nbsp;配置参考</a></li><li><a class="" href="version_update.html">20.3&nbsp;关于升级</a></li><li><a class="" href="memorabilia.html">20.4&nbsp;大事记</a></li></ul></li><li class=" child"><a class="title " href="thanks.html" title="鸣谢">第21章&nbsp;鸣谢</a></li></ul></div></div></div></div><div id="tools"><div class="inner"><div class="book-tool"><div class="content cf"><div class="search fl"><form action="/manual/_search.html" method="post" class="cf"><label for="search-key">输入搜索关键字...</label><input id="search-key" class="text fl" type="text" name="keywords" /><input class="button fl" type="submit" value="&nbsp;" title="搜索" /></form></div><a class="next fr" href="javascript:void(0)" title="下一章"><i>&nbsp;</i></a><a class="prev fr" href="javascript:void(0)" title="上一章"><i>&nbsp;</i></a><a class="share fr" href="javascript:void(0)" title="分享">分享<i>&nbsp;</i></a></div></div></div></div><div id="gird"><div class="inner"><div class="book-title" menu="65"><h1>6.12&nbsp;连贯操作</h1></div><div id="78" class="book-content">ThinkPHP模型基础类提供的连贯操作方法，可以有效的提高数据存取的代码清晰度和开发效率，并且支持所有的CURD操作。使用也比较简单， 假如我们现在要查询一个User表的满足状态为1的前10条记录，并希望按照用户的创建时间排序 ，代码如下： 
<pre class="code" lang="php">$User-&gt;where('status=1')-&gt;order('create_time')-&gt;limit(10)-&gt;select();</pre>这里的where、order和limit方法就被称之为连贯操作方法，T除了select方法必须放到最后一个外（因为select方法并不是连贯操作方法），连贯操作T的方法调用顺序没有先后，例如，下面的代码和上面的等效： 
<pre class="code" lang="php">$User-&gt;order('create_time')-&gt;limit(10)-&gt;where('status=1')-&gt;select();</pre>如果不习惯使用连贯操作的话，还支持直接使用参数进行查询的方式。例如上面的代码可以改写为：
<pre class="code" lang="php">$User-&gt;select(array('order'=&gt;'create_time','where'=&gt;'status=1','limit'=&gt;'10'));</pre>使用数组参数方式的话，索引的名称就是连贯操作的方法名称。其实T不仅仅是查询方法可以使用连贯操作，包括所有的CURD方法都可以使用，例如： 
<pre class="code" lang="php">$User-&gt;where('id=1')-&gt;field('id,name,email')-&gt;find();&nbsp;
$User-&gt;where('status=1&nbsp;and&nbsp;id=1')-&gt;delete();</pre>连贯操作通常只有一个参数，并且仅在当此查询或者操作有效，完成后会自动清空连贯操作的所有传值（有个别特殊的连贯操作有多个参数，并且会记录当前的传值）。简而言之，连贯操作的结果不会带入以后的查询。<br />系统支持的连贯操作方法有：
<table border="0" cellspacing="1" cellpadding="0">
  <tr>
    <th>连贯操作</th>
    <th>作用</th>
    <th>支持的参数类型</th>
  </tr>
  <tr>
    <td>where</td>
    <td>用于查询或者更新条件的定义</td>
    <td>字符串、数组和对象</td>
  </tr>
  <tr>
    <td>table</td>
    <td>用于定义要操作的数据表名称</td>
    <td>字符串和数组</td>
  </tr>
  <tr>
    <td>alias</td>
    <td>用于给当前数据表定义别名</td>
    <td>字符串</td>
  </tr>
  <tr>
    <td>data</td>
    <td>用于新增或者更新数据之前的数据对象赋值</td>
    <td>数组和对象</td>
  </tr>
  <tr>
    <td>field</td>
    <td>用于定义要查询的字段（支持字段排除）</td>
    <td>字符串和数组</td>
  </tr>
  <tr>
    <td>order</td>
    <td>用于对结果排序</td>
    <td>字符串和数组</td>
  </tr>
  <tr>
    <td>limit</td>
    <td>用于限制查询结果数量</td>
    <td>字符串和数字</td>
  </tr>
  <tr>
    <td>page</td>
    <td>用于查询分页（内部会转换成limit）</td>
    <td>字符串和数字</td>
  </tr>
  <tr>
    <td>group</td>
    <td>用于对查询的group支持</td>
    <td>字符串</td>
  </tr>
  <tr>
    <td>having</td>
    <td>用于对查询的having支持</td>
    <td>字符串</td>
  </tr>
  <tr>
    <td>join*</td>
    <td>用于对查询的join支持</td>
    <td>字符串和数组</td>
  </tr>
  <tr>
    <td>union*</td>
    <td>用于对查询的union支持</td>
    <td>字符串、数组和对象</td>
  </tr>
  <tr>
    <td>distinct</td>
    <td>用于查询的distinct支持</td>
    <td>布尔值</td>
  </tr>
  <tr>
    <td>lock</td>
    <td>用于数据库的锁机制</td>
    <td>布尔值</td>
  </tr>
  <tr>
    <td>cache</td>
    <td>用于查询缓存</td>
    <td>支持多个参数</td>
  </tr>
  <tr>
    <td>relation</td>
    <td>用于关联查询（需要关联模型支持）</td>
    <td>字符串</td>
  </tr>
</table>所有的连贯操作都返回当前的模型实例对象（this），其中带*标识的表示支持多次调用。</div><div id="79" class="book-content"><h3>WHERE</h3><table border="0" cellspacing="1" cellpadding="0">
<tr>
<th colspan="2">where  用于查询或者更新条件的定义</th>
</tr>
		<tr>
			<td>用法</td>
			<td>where($where)</td>
		</tr>
		<tr>
			<td>参数</td>
			<td>where（必须）：查询或者操作条件，支持字符串、数组和对象</td>
		</tr>
		<tr>
			<td>返回值</td>
			<td>当前模型实例</td>
		</tr>
		<tr>
			<td>备注</td>
			<td>如果不调用where方法，默认不会执行更新和删除操作</td>
		</tr>
	</table>Where方法是使用最多的连贯操作方法，更详细的用法请参考后面的6.13 CURD操作和6.18查询语言部分。</div><div id="80" class="book-content"><h3>TABLE</h3><table border="0" cellspacing="1" cellpadding="0">
  <tr>
    <th colspan="2">table&nbsp;&nbsp;定义要操作的数据表名称，动态改变当前操作的数据表名称，需要写数据表的全名，包含前缀，可以使用别名和跨库操作</th>
  </tr>
  <tr>
    <td>用法</td>
    <td>table($table,$parse=null)</td>
  </tr>
  <tr>
    <td>参数</td>
    <td><p>table（必须）：数据表名称，支持操作多个表，支持字符串、数组和对象</p><p>parse（可选）预处理参数，详见14.3防止SQL注入 查询条件预处理</p></td>
  </tr>
  <tr>
    <td>返回值</td>
    <td>当前模型实例</td>
  </tr>
  <tr>
    <td>备注</td>
    <td>如果不调用table方法，会自动获取模型对应或者定义的数据表</td>
  </tr>
</table>用法示例：
<pre class="code" lang="php">$Model-&gt;Table('think_user&nbsp;user')-&gt;where('status&gt;1')-&gt;select();</pre>也可以在table方法中跨库操作，例如：
<pre class="code" lang="php">$Model-&gt;Table('db_name.think_user&nbsp;user')-&gt;where('status&gt;1')-&gt;select();</pre>Table方法的参数支持字符串和数组，数组方式的用法：
<pre class="code" lang="php">$Model-&gt;Table(array('think_user'=&gt;'user','think_group'=&gt;'group'))-&gt;where('status&gt;1')-&gt;select();</pre>使用数组方式定义的优势是可以避免因为表名和关键字冲突而出错的情况。<br />一般情况下，无需调用table方法，默认会自动获取当前模型对应或者定义的数据表。</div><div id="81" class="book-content"><h3>DATA</h3><table border="0" cellspacing="1" cellpadding="0">
  <tr>
    <th colspan="2">data&nbsp;&nbsp;可以用于新增或者保存数据之前的数据对象赋值</th>
  </tr>
  <tr>
    <td>用法</td>
    <td>data($data)</td>
  </tr>
  <tr>
    <td>参数</td>
    <td>data（必须）：数据，支持数组和对象</td>
  </tr>
  <tr>
    <td>返回值</td>
    <td>当前模型实例</td>
  </tr>
  <tr>
    <td>备注</td>
    <td>如果不调用data方法，则会取当前的数据对象或者传入add和save的数据</td>
  </tr>
</table>使用示例：
<pre class="code" lang="php">$Model-&gt;data($data)-&gt;add();
$Model-&gt;data($data)-&gt;where('id=3')-&gt;save();</pre>Data方法的参数支持对象和数组，如果是对象会自动转换成数组。如果不定义data方法赋值，也可以使用create方法或者手动给数据对象赋值的方式。<br />模型的data方法除了创建数据对象之外，还可以读取当前的数据对象，<br />例如：
<pre class="code" lang="php">$this-&gt;find(3);
$data&nbsp;=&nbsp;$this-&gt;data();</pre></div><div id="82" class="book-content"><h3>FIELD</h3><table border="0" cellspacing="1" cellpadding="0">
  <tr>
    <th colspan="2">field&nbsp;&nbsp;用于定义要查询的字段</th>
  </tr>
  <tr>
    <td>用法</td>
    <td>field($field,$except=false)</td>
  </tr>
  <tr>
    <td>参数</td>
    <td><p>field（必须）：字段名，支持字符串和数组，支持指定字段别名；如果为true则表示显式或者数据表的所有字段。</p>
    <p>except（可选）：是否排除，默认为false，如果为true表示定义的字段为数据表中排除field参数定义之外的所有字段。</p></td>
  </tr>
  <tr>
    <td>返回值</td>
    <td>当前模型实例</td>
  </tr>
  <tr>
    <td>备注</td>
    <td>如果不调用field方法，则默认返回所有字段，和field（'*'）等效</td>
  </tr>
</table>使用示例：
<pre class="code" lang="php">$Model-&gt;field('id,nickname&nbsp;as&nbsp;name')-&gt;select();
$Model-&gt;field(array('id','nickname'=&gt;'name'))-&gt;select();</pre>如果不调用field方法或者field方法传入参数为空的话，和使用field（'*'）是等效的。<br />如果需要显式的传入所有的字段，可以使用下面的方法：
<pre class="code" lang="php">$Model-&gt;field(true)-&gt;select();</pre>但是我们更建议只获取需要显式的字段名，或者采用字段排除方式来定义，例如：
<pre class="code" lang="php">$Model-&gt;field('status',true)-&gt;select();</pre>表示获取除了status之外的所有字段。</div><div id="83" class="book-content"><h3>ORDER</h3><table border="0" cellspacing="1" cellpadding="0">
  <tr>
    <th colspan="2">order&nbsp;&nbsp;用于对操作结果排序</th>
  </tr>
  <tr>
    <td>用法</td>
    <td>order($order)</td>
  </tr>
  <tr>
    <td>参数</td>
    <td>order（必须）：排序的字段名，支持字符串和数组，支持多个字段排序</td>
  </tr>
  <tr>
    <td>返回值</td>
    <td>当前模型实例</td>
  </tr>
  <tr>
    <td>备注</td>
    <td>如果不调用order方法，按照数据库的默认规则</td>
  </tr>
</table>使用示例：
<pre class="code" lang="php">order('id&nbsp;desc')&nbsp;</pre>排序方法支持对多个字段的排序
<pre class="code" lang="php">order('status&nbsp;desc,id&nbsp;asc')</pre>order方法的参数支持字符串和数组，数组的用法如下：
<pre class="code" lang="php">order(array('status'=&gt;'desc','id'))</pre></div><div id="84" class="book-content"><h3>LIMIT</h3><table border="0" cellspacing="1" cellpadding="0">
  <tr>
    <th colspan="2">limit&nbsp;&nbsp;用于定义要查询的结果限制（支持所有的数据库类型）</th>
  </tr>
  <tr>
    <td>用法</td>
    <td>limit($limit)</td>
  </tr>
  <tr>
    <td>参数</td>
    <td>limit（必须）：限制数量，支持字符串</td>
  </tr>
  <tr>
    <td>返回值</td>
    <td>当前模型实例</td>
  </tr>
  <tr>
    <td>备注</td>
    <td>如果不调用limit方法，则表示没有限制</td>
  </tr>
</table>备注	如果不调用limit方法，则表示没有限制<br />我们知道不同的数据库类型的limit用法是不尽相同的，但是在ThinkPHP的用法里面始终是统一的方法，也就是limit('offset,length') ，无论是Mysql、SqlServer还是Oracle数据库，都是这样使用，系统的数据库驱动类会负责解决这个差异化。<br />使用示例：
<pre class="code" lang="php">limit('1,10')</pre>如果使用limit('10') 等效于 limit('0,10')<br />3.1版本以后，limit方法增加第二个参数支持，例如：
<pre class="code" lang="php">$this-&gt;limit(10,100)-&gt;select();</pre>
和之前的用法
<pre class="code" lang="php">$this-&gt;limit('10,100')-&gt;select();</pre>
等效。</div><div id="85" class="book-content"><h3>PAGE</h3><table border="0" cellspacing="1" cellpadding="0">
  <tr>
    <th colspan="2">page&nbsp;&nbsp;用于定义要查询的数据分页</th>
  </tr>
  <tr>
    <td>用法</td>
    <td>page($page)</td>
  </tr>
  <tr>
    <td>参数</td>
    <td>page（必须）：分页，支持字符串</td>
  </tr>
  <tr>
    <td>返回值</td>
    <td>当前模型实例</td>
  </tr>
  <tr>
    <td>备注</td>
    <td>无</td>
  </tr>
</table>Page操作方法是新增的特性，可以更加快速的进行分页查询。<br />Page方法的用法和limit方法类似，格式为：
<pre class="code" lang="php">Page('page[,listRows]')</pre>Page表示当前的页数，listRows表示每页显示的记录数。例如：
<pre class="code" lang="php">Page('2,10')</pre>表示每页显示10条记录的情况下面，获取第2页的数据。<br />listRow如果不写的话，会读取limit('length') 的值，例如：
<pre class="code" lang="php">limit(25)-&gt;page(3);</pre>表示每页显示25条记录的情况下面，获取第3页的数据。<br />如果limit也没有设置的话，则默认为每页显示20条记录。<br />3.1版本以后，page方法增加第二个参数支持，例如：
<pre class="code" lang="php">$this-&gt;page(5,25)-&gt;select();</pre>
和之前的用法
<pre class="code" lang="php">$this-&gt;page('5,25')-&gt;select();</pre>
等效。</div><div id="86" class="book-content"><h3>GROUP</h3><table border="0" cellspacing="1" cellpadding="0">
  <tr>
    <th colspan="2">group&nbsp;&nbsp;用于数据库的group查询支持</th>
  </tr>
  <tr>
    <td>用法</td>
    <td>group($group)</td>
  </tr>
  <tr>
    <td>参数</td>
    <td>group（必须）：group的字段名，支持字符串</td>
  </tr>
  <tr>
    <td>返回值</td>
    <td>当前模型实例</td>
  </tr>
  <tr>
    <td>备注</td>
    <td>无</td>
  </tr>
</table>使用示例：
<pre class="code" lang="php">group('user_id')</pre>Group方法的参数只支持字符串</div><div id="87" class="book-content"><h3>HAVING</h3><table border="0" cellspacing="1" cellpadding="0">
  <tr>
    <th colspan="2">having&nbsp;&nbsp;用于数据库的having查询支持</th>
  </tr>
  <tr>
    <td>用法</td>
    <td>having($having)</td>
  </tr>
  <tr>
    <td>参数</td>
    <td>having（必须）：having，支持字符串</td>
  </tr>
  <tr>
    <td>返回值</td>
    <td>当前模型实例</td>
  </tr>
  <tr>
    <td>备注</td>
    <td>无</td>
  </tr>
</table>使用示例：
<pre class="code" lang="php">having('user_id&gt;0')</pre>having方法的参数只支持字符串</div><div id="88" class="book-content"><h3>JOIN</h3><table border="0" cellspacing="1" cellpadding="0">
  <tr>
    <th colspan="2">join&nbsp;&nbsp;用于数据库的join查询支持</th>
  </tr>
  <tr>
    <td>用法</td>
    <td>join($join)</td>
  </tr>
  <tr>
    <td>参数</td>
    <td>join（必须）：join操作，支持字符串和数组</td>
  </tr>
  <tr>
    <td>返回值</td>
    <td>当前模型实例</td>
  </tr>
  <tr>
    <td>备注</td>
    <td>join方法支持多次调用</td>
  </tr>
</table>使用示例：
<pre class="code" lang="php">$Model-&gt;join('&nbsp;work&nbsp;ON&nbsp;artist.id&nbsp;=&nbsp;work.artist_id')-&gt;join('card&nbsp;ON&nbsp;artist.card_id&nbsp;=&nbsp;card.id')-&gt;select();</pre>默认采用LEFT JOIN 方式，如果需要用其他的JOIN方式，可以改成
<pre class="code" lang="php">$Model-&gt;join('RIGHT&nbsp;JOIN&nbsp;work&nbsp;ON&nbsp;artist.id&nbsp;=&nbsp;work.artist_id')-&gt;select();</pre>如果join方法的参数用数组的话，只能使用一次join方法，并且不能和字符串方式混合使用。<br />例如：
<pre class="code" lang="php">join(array('&nbsp;work&nbsp;ON&nbsp;artist.id&nbsp;=&nbsp;work.artist_id','card&nbsp;ON&nbsp;artist.card_id&nbsp;=&nbsp;card.id'))</pre></div><div id="89" class="book-content"><h3>UNION</h3><table border="0" cellspacing="1" cellpadding="0">
  <tr>
    <th colspan="2">union&nbsp;&nbsp;用于数据库的union查询支持</th>
  </tr>
  <tr>
    <td>用法</td>
    <td>union($union,$all=false)</td>
  </tr>
  <tr>
    <td>参数</td>
    <td>union（必须）：union操作，支持字符串、数组和对象
    all（可选）：是否采用UNION&nbsp;ALL&nbsp;操作，默认为false</td>
  </tr>
  <tr>
    <td>返回值</td>
    <td>当前模型实例</td>
  </tr>
  <tr>
    <td>备注</td>
    <td>Union方法支持多次调用</td>
  </tr>
</table>使用示例：
<pre class="code" lang="php">
$Model-&gt;field('name')
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;table('think_user_0')
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;union('SELECT&nbsp;name&nbsp;FROM&nbsp;think_user_1')
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;union('SELECT&nbsp;name&nbsp;FROM&nbsp;think_user_2')
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;select();
</pre>数组用法：
<pre class="code" lang="php">
$Model-&gt;field('name')
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;table('think_user_0')
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;union(array('field'=&gt;'name','table'=&gt;'think_user_1'))
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;union(array('field'=&gt;'name','table'=&gt;'think_user_2'))
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;select();
</pre>或者
<pre class="code" lang="php">
$Model-&gt;field('name')
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;table('think_user_0')
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;union(array('SELECT&nbsp;name&nbsp;FROM&nbsp;think_user_1','SELECT&nbsp;name&nbsp;FROM&nbsp;think_user_2'))
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;select();
</pre>支持UNION ALL 操作，例如：
<pre class="code" lang="php">
$Model-&gt;field('name')
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;table('think_user_0')
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;union('SELECT&nbsp;name&nbsp;FROM&nbsp;think_user_1',true)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;union('SELECT&nbsp;name&nbsp;FROM&nbsp;think_user_2',true)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;select();
</pre>或者
<pre class="code" lang="php">
$Model-&gt;field('name')
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;table('think_user_0')
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;union(array('SELECT&nbsp;name&nbsp;FROM&nbsp;think_user_1','SELECT&nbsp;name&nbsp;FROM&nbsp;think_user_2'),true)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;select();
</pre>每个union方法相当于一个独立的SELECT语句。<br />注意：UNION 内部的 SELECT 语句必须拥有相同数量的列。列也必须拥有相似的数据类型。同时，每条 SELECT 语句中的列的顺序必须相同。</div><div id="90" class="book-content"><h3>DISTINCT</h3><table border="0" cellspacing="1" cellpadding="0">
  <tr>
    <th colspan="2">distinct&nbsp;&nbsp;查询数据的时候进行唯一过滤</th>
  </tr>
  <tr>
    <td>用法</td>
    <td>distinct($distinct)</td>
  </tr>
  <tr>
    <td>参数</td>
    <td>distinct（必须）：是否采用distinct，支持布尔值</td>
  </tr>
  <tr>
    <td>返回值</td>
    <td>当前模型实例</td>
  </tr>
  <tr>
    <td>备注</td>
    <td>无</td>
  </tr>
</table>使用示例：
<pre class="code" lang="php">$Model-&gt;Distinct(true)-&gt;field('name')-&gt;select();</pre></div><div id="91" class="book-content"><h3>RELATION</h3><table border="0" cellspacing="1" cellpadding="0">
  <tr>
    <th colspan="2">relation&nbsp;&nbsp;用于关联查询支持</th>
  </tr>
  <tr>
    <td>用法</td>
    <td>relation($relation)</td>
  </tr>
  <tr>
    <td>参数</td>
    <td>relation（必须）：关联操作</td>
  </tr>
  <tr>
    <td>返回值</td>
    <td>当前模型实例</td>
  </tr>
  <tr>
    <td>备注</td>
    <td>使用关联模型才支持</td>
  </tr>
</table>关联查询方法的详细用法请参考后面的6.23关联模型部分。</div><div id="92" class="book-content"><h3>LOCK</h3><table border="0" cellspacing="1" cellpadding="0">
  <tr>
    <th colspan="2">lock&nbsp;&nbsp;用于查询或者写入锁定</th>
  </tr>
  <tr>
    <td>用法</td>
    <td>lock($lock)</td>
  </tr>
  <tr>
    <td>参数</td>
    <td>lock（必须）：是否需要锁定，支持布尔值</td>
  </tr>
  <tr>
    <td>返回值</td>
    <td>当前模型实例</td>
  </tr>
  <tr>
    <td>备注</td>
    <td>join方法支持多次调用</td>
  </tr>
</table>Lock方法是用于数据库的锁机制，如果在查询或者执行操作的时候使用：
<pre class="code" lang="php">lock(true)</pre>就会自动在生成的SQL语句最后加上 FOR UPDATE或者FOR UPDATE NOWAIT（Oracle数据库）。</div><div id="93" class="book-content"><h3>CACHE</h3><table border="0" cellspacing="1" cellpadding="0">
  <tr>
    <th colspan="2">cache&nbsp;用于查询缓存操作</th>
  </tr>
  <tr>
    <td>用法</td>
    <td>cache($key=true,$expire='',$type='')</td>
  </tr>
  <tr>
    <td>参数</td>
    <td><p>key（可选）：是否启用查询缓存，支持布尔值和字符串，如果是字符串表示查询缓存的缓存名</p>
      <p>expire（可选）：查询缓存的有效期，如果留空取系统默认的缓存有效期</p>
    <p>type（可选）：查询缓存的缓存类型，如果留空取系统默认的缓存类型</p></td>
  </tr>
  <tr>
    <td>返回值</td>
    <td>当前模型实例</td>
  </tr>
  <tr>
    <td>备注</td>
    <td>如果不调用field方法，则默认返回所有字段，和field（'*'）等效</td>
  </tr>
</table>查询缓存的详细用法会在后面的12.6查询缓存部分详细描述。</div></div></div><script type="text/javascript">remark();</script><div id="footer" class="book-footer"><p>&copy;2012 ThinkPHP文档中心 由<a target="_blank" href="http://www.thinkphp.cn">&nbsp;</a>强力驱动</p><script type="text/javascript" src="http://tajs.qq.com/stats?sId=8891584" charset="UTF-8"></script></div></body></html>
<!-- Localized -->